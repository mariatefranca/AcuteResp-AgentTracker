# The main job for acute_resp_agent_job.
resources:
  jobs:
    acute_resp_agent_job_job:
      name: acute_resp_agent_job_job

      trigger:
        # Run this job every day, exactly one day from the last run; see https://docs.databricks.com/api/workspace/jobs/create#trigger
        periodic:
          interval: 7
          unit: DAYS

      #email_notifications:
       on_failure:
        - ${workspace.current_user.userName}

      tasks:
        - task_key: ingest_refreshing_data
          notebook_task:
            notebook_path: ../src/elt/extract_refreshing_data.py

        - task_key: feature_engineering
          depends_on:
            - task_key: ingest_refreshing_data
          notebook_task:
            notebook_path: ../src/elt/feature_engineering.py

    project_setup__job:
      name: acute_resp_agent_job_job

      # trigger:
        # Run this job every day, exactly one day from the last run; see https://docs.databricks.com/api/workspace/jobs/create#trigger
        # periodic:
        #   interval: 7
        #   unit: DAYS

      #email_notifications:
      #  on_failure:
      #    - your_email@example.com

      tasks:
        - task_key: ingest_static_data
          notebook_task:
            notebook_path: ../src/elt/extract_static_data.py

        - task_key: feature_engineering
          depends_on:
            - task_key: ingest_static_data
          notebook_task:
            notebook_path: ../src/elt/feature_engineering.py

